<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login - Admin</title>
  <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body class="theme-dark container">
  <main style="padding:28px;">
    <h1>تسجيل دخول الأدمن</h1>
    <p>سجّل بحساب Google المصرّح (Firebase) للوصول للوحة الأدمن.</p>
    <button id="googleSign" class="btn primary">تسجيل دخول بـ Google</button>
    <p id="status" style="margin-top:12px;color:#fda"></p>
  </main>

  <script src="../assets/js/firebase-config.js"></script>
  <script>
    document.getElementById('googleSign').addEventListener('click', async ()=>{
      const status = document.getElementById('status');
      if(!(window.firebase && firebase.auth)){ status.textContent='Firebase غير مهيأ محليًا.'; return; }
      const provider = new firebase.auth.GoogleAuthProvider();
      try{
        const res = await firebase.auth().signInWithPopup(provider);
        const email = res.user.email;
        // فقط ادمن محدد يرى لوحة الأدمن - عدّل البريد هنا أو راجع Firestore للتحقّق
        const allowed = ['aaaab9957@gmail.com'];
        if(allowed.includes(email)){
          localStorage.setItem('prok_admin','1');
          window.location.href = 'dashboard.html';
        } else {
          await firebase.auth().signOut();
          status.textContent = 'هذا الحساب غير مصرح له كأدمن.';
        }
      }catch(e){
        status.textContent = 'خطأ بالمصادقة: ' + e.message;
      }
    });
  </script>
</body>
</html>
